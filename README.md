## 주특기 플러스 개인과제 (24.07.05)

### 설정
- ```application-secret.properties``` 를 생성하여 DB환경을 세팅을 해서 application이 작동됩니다.
    - 테스트 코드는 ```application-test.properties``` 의 H2 in-memeory DB를 사용합니다.
- 과제에서의 **게시글, feed**는 **아파트 판매글, Apart** 객체 입니다.
- 과제에서의 **댓글, comment**는 **아파트 문의 댓글, QnA** 객체 입니다.
### 구현 단계
- **필수 구현 기능** - 완료
- **추가 구현 기능** - 완료
- **명예의 전당 기능** - <팔로워를 가장 많이 보유한 상위 10명의 프로필 정보 목록 조회> 까지

* * *
# 소개
**1. 팀명** : XI
   
**2. 프로젝트명** : Sparta 부동산

**3. 개요**
   1) **기획배경**
      - 아파트의 매도자와 구입자간 정보를 직관적으로 정리해서 확인하는 거래의 부재
        
   2) **기획목적 & 효과**
      - 매도자의 아파트에 관한 정보를 한 번에 조회하고 선택하여 확인하면서 구입자가 원하는 아파트를 찾을 수 있는 Web 기반 Feed 형태 서비스 제공
      - 구입자와 매도자의 빠른 정보공유로 인한 빠른 거래 판로 개척
        
   3) **기능요약**
      - 사용자(매도자)가 매매를 판매할 아파트의 정보 피드를 등록, 게시
      - 사용자(구입자)들이 해당 정보 피드에 댓글로 자세 사항 문의
     
**4. WBS & Task**
   * **김서홍**
     - 프로필 조회 / 수정 기능 구현
   * **김창민**
     - QnA 댓글 등록 / 조회 / 수정 / 삭제 기능 구현
     - 기능 테스트
   * **김현진**
     - JWT 통한 인증 / 인가 구현
     - 로그인 기능 구현
   * **노상윤**
     - 판매 게시글 등록 / 조회 / 수정 / 삭제 기능 구현
   * **홍용근**
     - 프로필 조회 / 수정 기능 구현
     - 인증 / 인가 구현
     - 회원 관리 기능
     - 로그아웃 기능 구현

* * *
# WireFrame

![image](https://github.com/andrew75313/Real-Estate-Outsourcing-Services-Team-Project/assets/144455746/4022fb0f-1642-44a7-8304-e29160303ab3)

* * *
# API 명세서

[API 명세서 바로가기](https://teamsparta.notion.site/180514f1e7694531b01f55db93c52e4c?v=e1eb0263b5914977af8c4902cac8f748)

* * *
# ERD DIAGRAM

![image](https://github.com/andrew75313/Real-Estate-Outsourcing-Services-Team-Project/assets/144455746/04452778-4fd4-4d88-85d9-23ab15c9b17f)

[ERD DIAGRAM 바로가기](https://www.erdcloud.com/d/vZwsQD8rzsWANXb22)


* * *
# 필수 요구사항

## 인증/보안

- **username**, **password**를 클라이언트에서 전달 받습니다.
- **Spring Security**와 **JWT**를 사용하여 설계 및 구현합니다.
- JWT는 **Access Token**, **Refresh Token**을 구현합니다.
- Access Token 만료 시 : **유효한 Refresh Token**을 통해 새로운 Access Token과 Refresh Token을 발급
- Refresh Token 만료 시 : **재로그인**을 통해 새로운 Access Token과 Refresh Token을 발급
- API를 요청할 때는 Access Token을 사용합니다.
- Access Token, Refresh Token은 동시에 전달을 하는게 아니고 용도에 맞게 사용되어야 합니다.

## 사용자

#### 회원가입

- username: `최소 4자 이상, 10자 이하이며 알파벳 소문자(a~z), 숫자(0~9)`
- password: `최소 8자 이상, 15자 이하이며 알파벳 대소문자(a~z, A~Z), 숫자(0~9), 특수문자`
- DB에 중복된 `username`이 없다면 회원을 저장한다.
- 클라이언트에 성공 메시지와 상태코드를 반환한다.
- 회원 권한 부여
  - ADMIN
    - 모든 게시글, 댓글 수정과 삭제 가능
  - USER
    - 본인이 작성한 게시글, 댓글에 한하여 수정과 삭제 가능
- ⚠️ 필수 예외처리
  - DB에 중복된 `username`이 이미 존재하는 경우
  - `username`,`password` 조건에 맞지 않는 경우

#### 로그인

- 성공
  - DB에서 `username`을 사용하여 회원가입 된 사용자인지 확인한다.
  - 회원가입 된 사용자라면 `password`를 비교하여 로그인한다.
  - **header**에 토큰을 추가하고 성공 상태코드와 메세지를 반환합니다.
- ⚠️ 필수 예외처리
  - 유효하지 않은 사용자 정보로 로그인을 시도한 경우
    
    ex. 회원가입을 하지 않거나 회원 탈퇴한 경우
    
  - `username`과 `password`가 일치하지 않는 사용자 정보로 로그인을 시도한 경우

#### 로그아웃

- 조건
  - 로그아웃 시, 발행한 토큰은 **초기화** 합니다.
  - 로그아웃 후 초기화 된 `Refresh Token`은 재사용할 수 없고 재로그인해야 합니다.

## 프로필

#### 비밀번호 수정 조건

- 비밀번호 수정 시, 본인 확인을 위해 현재 비밀번호를 입력하여 올바른 경우에만 수정할 수 있습니다.
- 비밀번호는 현재 비밀번호 및 최근 사용한 세 개의 비밀번호와 다르게 설정해야 합니다.
  - 예시) 현재 비밀번호가 'currentPass'이고 이전 비밀번호가 'password1', 'password2', 'password3'였다면 새로운 비밀번호는 이 네 개와 다른 새로운 비밀번호여야 합니다.

#### 프로필 수정 기능

- 이름, 한 줄 소개와 같은 기본적인 정보를 볼 수 있어야 하며 수정할 수 있어야 합니다.

## 아파트 게시글

- 게시물 작성, 수정, 삭제는 **인가(Authorization)** 가 필요합니다.
- 유효한 JWT 토큰을 가진 작성자 본인만 처리할 수 있습니다.

#### 조회

- 모든 사용자가 전체 게시물 데이터를 조회할 수 있습니다.
- 기본 정렬은 **생성일자 기준으로 최신순**으로 정렬합니다.
- 페이지네이션
  - 페이지네이션하여 각 페이지 당 게시물 데이터가 5개씩 나오게 합니다.
- 필수 예외처리
  - 작성자가 아닌 다른 사용자가 게시물 작성, 수정, 삭제를 시도하는 경우

## QnA 댓글

- 사용자는 게시물에 댓글을 작성할 수 있고, 본인의 댓글은 **수정 및 삭제**를 할 수 있습니다.
- **내용**만 수정이 가능합니다.
- 댓글 작성, 수정, 삭제는 **인가(Authorization)** 가 필요합니다.
- 유효한 JWT 토큰을 가진 작성자 본인만 처리할 수 있습니다.
  - 예) 본인이 작성한 댓글 외엔 수정 및 삭제 불가
